<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <link rel="icon" href="https://egov-dev-assets.s3.ap-south-1.amazonaws.com/browser-icon.png" />
  <link
    href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:wght@400;500;700&family=Roboto:wght@400;500;700&display=swap"
    rel="stylesheet" type="text/css" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#00bcd1" />
  <title>DIGIT</title>

  <link rel="stylesheet" href="https://unpkg.com/@egovernments/digit-ui-components-css@0.2.0-beta.14/dist/index.css" />
  <link rel="stylesheet" href="https://unpkg.com/@egovernments/digit-ui-health-css@0.2.113/dist/index.css" />
  <link rel="stylesheet" href="https://unpkg.com/@egovernments/digit-ui-css@1.8.37/dist/index.css" />

  <!-- <link rel="stylesheet" href="https://unpkg.com/@egovernments/digit-ui-health-css@0.2.51/dist/index.css" /> -->
  <!-- <link rel="stylesheet" href="https://unpkg.com/@egovernments/digit-ui-components-css@0.2.0/dist/index.css" /> -->

  <script src="%REACT_APP_GLOBAL%"></script>

  <!-- Override citizen header logo with DIGIT_FOOTER config (citizen routes only) -->
  <script>
    (function () {
      var CUSTOM_LOGO_URL = null;

      // Get the logo URL - tries CITIZEN_HEADER_LOGO first, then DIGIT_FOOTER as fallback
      function getLogoUrl() {
        if (CUSTOM_LOGO_URL) return CUSTOM_LOGO_URL;
        try {
          var cfg = window.globalConfigs;
          if (cfg) {
            var url = cfg.getConfig("CITIZEN_HEADER_LOGO") || cfg.getConfig("DIGIT_FOOTER");
            if (url) {
              CUSTOM_LOGO_URL = url;
            }
          }
        } catch (e) { }
        return CUSTOM_LOGO_URL;
      }

      // Only override on citizen-facing routes
      function isCitizenRoute() {
        return window.location.pathname.indexOf('/citizen') !== -1;
      }

      // Find the header img element
      function findHeaderImg() {
        return document.querySelector('.digit-header-action-fields img') ||
          document.querySelector('.digit-topbar img') ||
          document.querySelector('#topbar-logo') ||
          document.querySelector('.city');
      }

      // Apply the logo override to a specific img element
      // Also attach a per-element observer so React src resets are immediately undone
      function applyLogoToImg(img, logoUrl) {
        if (!img || !logoUrl) return;

        if (img.getAttribute('src') !== logoUrl) {
          img.setAttribute('src', logoUrl);
        }

        if (img._logoOverrideActive) return;
        img._logoOverrideActive = true;

        // Watch this specific img for src attribute changes (React re-renders)
        var attrObserver = new MutationObserver(function (mutations) {
          mutations.forEach(function (mutation) {
            if (mutation.attributeName === 'src') {
              var current = img.getAttribute('src');
              if (current !== logoUrl) {
                img.setAttribute('src', logoUrl);
              }
            }
          });
        });
        attrObserver.observe(img, { attributes: true, attributeFilter: ['src'] });
      }

      // Main function: find img and apply override
      function overrideLogo() {
        if (!isCitizenRoute()) return; // skip employee / other pages

        var logoUrl = getLogoUrl();
        if (!logoUrl) return;

        var img = findHeaderImg();
        if (img) {
          applyLogoToImg(img, logoUrl);
        }
      }

      // Watch the whole DOM for the img to appear (React mounting)
      function startDomObserver() {
        var domObserver = new MutationObserver(function (mutations) {
          for (var i = 0; i < mutations.length; i++) {
            if (mutations[i].addedNodes.length || mutations[i].type === 'childList') {
              overrideLogo();
              break;
            }
          }
        });
        domObserver.observe(document.body, { childList: true, subtree: true });
      }

      // Bootstrap
      function init() {
        overrideLogo();
        startDomObserver();

        // Poll briefly in case globalConfigs loads after this script
        var pollCount = 0;
        var poll = setInterval(function () {
          overrideLogo();
          pollCount++;
          if (pollCount > 20) clearInterval(poll); // stop after 10 seconds
        }, 500);
      }

      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', init);
      } else {
        init();
      }
    })();
  </script>

  <script>
    // DOM Override for Profile Page
    (function () {
      setInterval(function () {
        if (window.location.href.indexOf("/employee/user/profile") > -1) {
          var mobileConfig = window.globalConfigs && window.globalConfigs.getConfig("CORE_MOBILE_CONFIGS");
          if (mobileConfig && mobileConfig.mobilePrefix) {
            var prefixEls = document.querySelectorAll(".digit-prefix");
            prefixEls.forEach(function (el) {
              if (el.innerText.trim() !== mobileConfig.mobilePrefix) {
                el.innerText = mobileConfig.mobilePrefix;
              }
            });
          }
        }
      }, 500);
    })();
  </script>
  <style>
    .digit-inbox-search-composer-label-pair .digit-employee-select-wrap {
      margin-top: -0.5rem !important;
    }

    /* Hide email login link on citizen login page */
    div[style*="margin-top: -24px"][style*="margin-bottom: 1.5rem"] {
      display: none !important;
    }

    /* Align label and input field horizontally on desktop - Only for user profile page */
    @media (min-width: 768px) {
      .user-profile .digit-label-field-pair {
        display: flex !important;
        align-items: center !important;
        gap: 1rem !important;
        padding-left: 1.5rem !important;
      }

      .user-profile .digit-label-field-pair .digit-card-label {
        margin: 0 !important;
        min-width: 150px !important;
        flex-shrink: 0 !important;
      }

      /* Add padding to save button on desktop */
      .user-profile button[style*="margin-top: 24px"] {
        margin-left: 1.5rem !important;
      }
    }

    /* Stack vertically on mobile - Only for user profile page */
    @media (max-width: 767px) {
      .user-profile .digit-label-field-pair {
        display: block !important;
        padding-left: 1rem !important;
      }

      .user-profile .digit-label-field-pair .digit-card-label {
        margin-bottom: 0.5rem !important;
      }

      /* Add padding to save button on mobile */
      .user-profile button[style*="margin-top: 24px"] {
        margin-left: 1rem !important;
      }
    }

    .digit-label-field-pair.boundary-filter-label-left-align {
      display: block !important;

      .digit-header-content.label {
        display: none !important;
      }

      .digit-field {
        width: 100% !important;

        .selecting-boundary-div {
          .boundary-item {
            margin-bottom: 24px !important;
            display: flex !important;
            flex-direction: row !important;
            align-items: center !important;
            gap: unquote("clamp(1rem, 2.5vw, 2rem)") !important;

            h2.boundary-selection-label {
              margin: 0 !important;
              width: 32.33% !important;
              padding: 0 !important;
              font-weight: normal !important;
              font-size: 1rem !important;
              color: #0b0c0c !important;
              line-height: 19px !important;
              margin-bottom: 0px !important;
              overflow: hidden !important;
              white-space: nowrap !important;
              text-overflow: ellipsis !important;
            }

            .digit-field-full {
              width: auto !important;
              flex: 1 !important;
              min-width: 0 !important;

              .padding-dropdown {
                width: 100% !important;
                display: flex !important;
                justify-content: flex-start !important;

                .digit-dropdown-employee-select-wrap {
                  width: 100% !important;

                  @media (min-aspect-ratio: 3/4) {
                    max-width: 37.5rem;
                  }

                  .digit-dropdown-select {
                    width: 100% !important;
                    max-width: 37.5rem !important;

                  }
                }
              }
            }
          }
        }
      }
    }

    .digit-header-content.label .label-container {
      display: -webkit-box;
      display: -ms-flexbox;
      display: flex;
      -webkit-box-align: center;
      -ms-flex-align: center;
      align-items: center;
      width: 100%;
      grid-gap: .25rem;
      gap: .25rem;
    }
  </style>
</head>

<body>
  <noscript>You need to enable JavaScript to run this app.</noscript>
  <div id="root"></div>
</body>

</html>